name: Build and Publish Custom Ubuntu ISO

on:
  workflow_dispatch:
    inputs:
      package_names:
        description: 'Comma-separated list of additional packages to install'
        required: true
      iso_name:
        description: 'Name for the custom ISO'
        required: true

jobs:
  build-iso:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Setup Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'

    - name: Add Cubic PPA
      run: |
        sudo add-apt-repository ppa:cubic-wizard/release -y
        sudo apt-get update

    - name: Install Cubic
      run: |
        sudo apt-get install cubic -y

    - name: Download Custom ISO
      run: |
        wget https://archive.org/download/spoink-os/SpoinkOS-Latest-desktop-amd64.iso -O ${{ inputs.iso_name }}.iso

    - name: Push Changes
      uses: ad-m/github-push-action@master
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
